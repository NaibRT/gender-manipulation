<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Document</title>

 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css">
 <link rel="stylesheet" href="https://cdn.datatables.net/1.10.21/css/dataTables.bootstrap4.min.css">
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
 <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <a href="/logout" type="button" class="btn btn-primary logout">Log out</a>
    </header>
  <div class="container">
    <div class="col-xs-1-12">
       <div class="row">
           <br>
           <br>
           <br>
        <table id="example" class="table table-striped table-bordered display dataTable no-footer" role="grid" style="width:100%">
         <thead>
            <tr>
                <th>ID</th>
                <th>Email</th>
                <th>Gender</th>
                <th>Language</th>
                <th>First Pictogram for Female</th>
                <th>First Pictogram for Neutral</th>
                <th>First Pictogram for Male</th>
                <th>Secound Pictogram for Female</th>
                <th>Secound Pictogram for Neutral</th>
                <th>Secound Pictogram for Male</th>
                <th>Last Pictogram</th>
                <th>Date</th>
                <th>Operators</th>
            </tr>
         </thead>
         <tbody class="tabel-body">
  
         <tfoot>
            <tr>
                <th>ID</th>
                <th>Email</th>
                <th>Gender</th>
                <th>Language</th>
                <th>First Pictogram for Female</th>
                <th>First Pictogram for Neutral</th>
                <th>First Pictogram for Male</th>
                <th>Secound Pictogram for Female</th>
                <th>Secound Pictogram for Neutral</th>
                <th>Secound Pictogram for Male</th>
                <th>Last Pictogram</th>
                <th>Date</th>
                <th>Operators</th>
            </tr>
         </tfoot>
       </table>
       <script>
           function deleteItem(param){ 
                fetch('/delete-item',{
                    method:'Post',
                    data:param
                })
                .then(response=>{
                    response.json()
                    .then((value) => {console.log(value)})
                    .catch((err) => {console.log(err)})
                })
                .catch((err) => {console.log(err)})

            }

             fetch('/get-data')
    .then(respons=>{
        respons.json()
        .then(data=>{
            console.log(data)
            let tr=document.createElement('tr');
                data.forEach(x=>{
                 var item=`
                 <tr role='row' class='odd'>
                 <td>${x.ID}</td>
                 <td>${x.email}</td>
                 <td>${x.gender}</td>
                 <td>${x.language}</td>
                 <td>${x.gm1forfemale}</td>
                 <td>${x.gm1forNeutral}</td>
                 <td>${x.gm1formale}</td>
                 <td>${x.gm2forfemale}</td>
                 <td>${x.gm2forNeutral}</td>
                 <td>${x.gm2formale}</td>
                 <td>
                    ${x.olympic}
                 </td>
                 <td>${x.dateTime}</td>
                 <td>
                    <button data-id=${x.ID} onclick='' class='btn btn-primary'>View</button>
                    <button data-id=${x.ID} onclick='deleteItem' class='btn btn-danger'>Delete</button>
                    </td>
                 </tr>
                ` 
                document.querySelector('.tabel-body').innerHTML+=item
            })
        })
        .catch(err=>{
            console.log(err)
        })
    })
    .catch(err=>{
        console.log(err)
    })
       </script>
       </div>
    </div>
  </div>
</body>
<script  src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script  src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js"></script>
<script>
$(document).ready(function() {
    $('#example').DataTable();
});
</script>
</html>